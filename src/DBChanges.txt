alter table maker_detail add column inspection_charges int null;

delete from plan_components where component_type='tax'

delete from user_plan_components where plan_components_id in(14,15,16,17,18)

alter table plan_components modify component_type enum('security_deposit','monitoring_charges','pickup_delivery','plan_price','inspection_charge');

alter table plan_components add column is_taxable tinyint(1) not null default 1;

update plan_components set plan_components.is_taxable=1 where component_type in ('monitoring_charges','pickup_delivery','plan_price');

update plan_components set plan_components.is_taxable=0 where component_type in ('tax','security_deposit');

rename table delivery_details TO pickup_deliveries

create table pickup_delivery_status(
    id int primary key auto_increment,
    pickup_delivery_id int not null,
    status enum('dispatched','ready_for_dispatched','pickup_awaiting') default 'pickup_awaiting',
    created_at datetime not null default now(),
    updated_at datetime not null default now(),
    foreign key (pickup_delivery_id) references pickup_deliveries(id)
)

add inspection_charge in plan_components